{% extends "core/base.html" %}
{% load static i18n i18n_attrs %}
{% block title %}{% trans "Бронирование стола — Dolce Vita Family" %}{% endblock %}
{% block meta_description %}{% trans "Забронируйте стол: укажите дату, время, количество гостей и отправьте заявку в WhatsApp." %}{% endblock %}

{% block hero %}
<section class="max-w-6xl mx-auto px-4 pt-6">
  <div class="rounded-3xl bg-white/80 backdrop-blur shadow-xl ring-1 ring-black/5 p-6 md:p-8">
    <h1 class="brand text-3xl md:text-4xl font-semibold">{% trans "Бронирование стола" %}</h1>
    <p class="text-stone-600 mt-2">{% trans "Заполните форму — заявка откроется в WhatsApp для подтверждения." %}</p>
    <div class="flag-x h-1 w-28 mt-4 rounded-full"></div>
  </div>
</section>
{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto">
  {% if no_whatsapp %}
    <div class="mb-4 p-3 rounded-xl bg-amber-50 border border-amber-200 text-amber-800">
      {% trans "В настройках не указан номер WhatsApp. Добавьте WHATSAPP_PHONE в settings.py." %}
    </div>
  {% endif %}

  <form method="post" class="mt-6 grid grid-cols-1 gap-4 bg-white/80 backdrop-blur rounded-2xl p-5 shadow ring-1 ring-black/5">
    {% csrf_token %}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm text-stone-600 mb-1" for="{{ form.name.id_for_label }}">{% trans "Имя" %}</label>
        {{ form.name }}
        {% if form.name.errors %}<p class="text-red-600 text-sm mt-1">{{ form.name.errors|striptags }}</p>{% endif %}
      </div>
      <div>
        <label class="block text-sm text-stone-600 mb-1" for="{{ form.phone.id_for_label }}">{% trans "Телефон" %}</label>
        {{ form.phone }}
        {% if form.phone.errors %}<p class="text-red-600 text-sm mt-1">{{ form.phone.errors|striptags }}</p>{% endif %}
      </div>

      <div>
        <label class="block text-sm text-stone-600 mb-1" for="{{ form.date.id_for_label }}">{% trans "Дата" %}</label>
        {{ form.date }}
        {% if form.date.errors %}<p class="text-red-600 text-sm mt-1">{{ form.date.errors|striptags }}</p>{% endif %}
      </div>
      <div>
        <label class="block text-sm text-stone-600 mb-1" for="{{ form.time.id_for_label }}">{% trans "Время" %}</label>
        {{ form.time }}
        {% if form.time.errors %}<p class="text-red-600 text-sm mt-1">{{ form.time.errors|striptags }}</p>{% endif %}
      </div>

      <div>
        <label class="block text-sm text-stone-600 mb-1" for="{{ form.guests.id_for_label }}">{% trans "Гостей" %}</label>
        {{ form.guests }}
        {% if form.guests.errors %}<p class="text-red-600 text-sm mt-1">{{ form.guests.errors|striptags }}</p>{% endif %}
      </div>

      {# НОВОЕ ПОЛЕ ЭТАЖ #}
      <div>
        <label class="block text-sm text-stone-600 mb-1" for="{{ form.floor.id_for_label }}">{% trans "Этаж" %}</label>
        {{ form.floor }}
        {% if form.floor.errors %}<p class="text-red-600 text-sm mt-1">{{ form.floor.errors|striptags }}</p>{% endif %}
      </div>
    </div>

    <div>
      <label class="block text-sm text-stone-600 mb-1" for="{{ form.comment.id_for_label }}">{% trans "Комментарий" %}</label>
      {{ form.comment }}
      {% if form.comment.errors %}<p class="text-red-600 text-sm mt-1">{{ form.comment.errors|striptags }}</p>{% endif %}
    </div>

    <div class="pt-2 flex items-center gap-3">
      <button class="inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-600 text-white font-semibold shadow hover:shadow-lg" type="submit">
        <!-- иконка -->
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 32 32" fill="currentColor"><path d="M19.11 17.34c-.28-.14-1.62-.8-1.87-.9-.25-.09-.43-.14-.61.14-.18.27-.7.9-.86 1.08-.16.18-.32.2-.6.07-.28-.14-1.19-.44-2.27-1.4-.84-.75-1.41-1.68-1.57-1.96-.16-.27-.02-.42.12-.56.12-.12.28-.32.42-.48.14-.16.18-.27.28-.45.09-.18.05-.34-.02-.48-.07-.14-.61-1.46-.83-2-.22-.53-.44-.46-.61-.47-.16-.01-.34-.01-.52-.01-.18 0-.48.07-.73.34-.25.27-.96.94-.96 2.28 0 1.34.99 2.63 1.13 2.8.14.18 1.95 2.98 4.72 4.18.66.28 1.18.45 1.58.57.66.21 1.26.18 1.73.11.53-.08 1.62-.66 1.85-1.3.23-.64.23-1.2.16-1.31-.07-.11-.25-.18-.53-.32z"/><path d="M26.66 5.34C23.79 2.48 20.03 1 16 1 7.72 1 1 7.72 1 16c0 2.64.69 5.22 2 7.49L1 31l7.69-1.97A14.87 14.87 0 0 0 16 31c8.28 0 15-6.72 15-15 0-4.03-1.48-7.79-4.34-10.66zM16 28.33c-2.47 0-4.88-.66-6.98-1.92l-.5-.3-4.56 1.17 1.22-4.45-.33-.52A12.29 12.29 0 0 1 3.67 16c0-6.81 5.52-12.33 12.33-12.33 3.29 0 6.38 1.28 8.71 3.61a12.24 12.24 0 0 1 3.62 8.72c0 6.81-5.53 12.33-12.33 12.33z"/></svg>
        {% trans "Отправить в WhatsApp" %}
      </button>

      <a href="{% url 'core:home' %}" class="px-4 py-2 rounded-xl border border-stone-300 text-stone-700 hover:bg-stone-50">
        {% trans "Отмена" %}
      </a>
    </div>
  </form>
</div>
{% endblock %}
