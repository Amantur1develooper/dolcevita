{% extends "core/base.html" %}
{% load static %}
{% block title %}Меню (PDF) — Dolce Vita Family{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto">
  <!-- Кнопки действий -->
  <div class="flex flex-wrap items-center gap-2 mb-3">
    <a href="{% static 'docs/DOLCEMENU2025.pdf' %}" target="_blank" rel="noopener"
       class="px-4 py-2 rounded-xl bg-stone-900 text-white">Открыть в новой вкладке</a>
   
  </div>

  <!-- Контейнер под встраивание -->
  <div id="pdf-shell"
       class="rounded-2xl overflow-hidden bg-white/80 backdrop-blur ring-1 ring-black/5 shadow">

    <!-- 1) object: лучший кросс-браузерный вариант с фолбэком -->
    <object id="pdf-object"
            data="{% static 'docs/DOLCEMENU2025.pdf' %}"
            type="application/pdf"
            class="block w-full"
            style="height: 70vh">
      <!-- 2) Фолбэк, если PDF не встраивается (iOS Safari/старые браузеры) -->
      <div class="p-4 text-sm text-stone-700">
        <p class="mb-2">Ваш браузер не поддерживает встроенный просмотр PDF.</p>
        <a href="{% static 'docs/DOLCEMENU2025.pdf' %}" target="_blank" rel="noopener"
           class="inline-block px-4 py-2 rounded-xl bg-emerald-600 text-white">Открыть PDF</a>
        <a href="{% static 'docs/DOLCEMENU2025.pdf' %}" download
           class="inline-block ml-2 px-4 py-2 rounded-xl border border-stone-300 text-stone-800">Скачать</a>
      </div>
    </object>

  </div>

  <!-- Микро-подсказка для мобильных -->
  <p class="mt-2 text-xs text-stone-500">
    На телефоне иногда удобнее нажать «Открыть в новой вкладке» .
  </p>
</div>
{% endblock %}

{% block scripts %}
{{ block.super }}
<script>
  // Адаптивная высота под экран и шапку
  (function(){
    const shell = document.getElementById('pdf-shell');
    const obj = document.getElementById('pdf-object');
    const header = document.querySelector('header');

    function setHeight(){
      const vh = window.innerHeight || document.documentElement.clientHeight;
      const headerH = header ? header.getBoundingClientRect().height : 0;
      // отнимаем шапку и внешние отступы, оставляем минимум для маленьких экранов
      const h = Math.max(420, vh - headerH - 32); // 32px — запас
      obj.style.height = h + 'px';
    }

    setHeight();
    window.addEventListener('resize', setHeight);
    // iOS Safari при появлении/скрытии адресной строки меняет innerHeight
    window.addEventListener('orientationchange', () => setTimeout(setHeight, 250));
  })();
</script>
{% endblock %}
